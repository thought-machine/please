remote_file(
    name = "arcat",
    url = f"https://github.com/please-build/arcat/releases/download/v1.2.1/arcat-1.2.1-{CONFIG.HOSTOS}_{CONFIG.HOSTARCH}",
    out = "arcat",
    binary = True,
    hashes = [
        "507958f2e44e5de7529cb85fa9137ddcca2293daf6ef30dbc1a1cfa22e86ee96", # darwin_amd64
        "717cb15f1237010740be50df3561027a976ac5bd2a5d8f5c30d2ea57ccbcad82", # darwin_arm64
        "190fbf9cdcbcf53a82b886076c45a07323eeb6b4f460485c645cf2f306927c0c", # freebsd_amd64
        "e5b23a127c093939f21bf2f8cb66635b7f0b88cf8a3d1fca1bc19a114f5c5a0c", # linux_amd64
        "019ee52b534a3c48028e9a7229990055432af24a23892619e1a0d28eb3265245", # linux_arm64
    ],
    visibility = ["PUBLIC"],
)

remote_file(
    name = "download",
    url = f"{{ .ToolsURL }}",
    extract = True,
)

{{ range $tool := .Tools }}
genrule(
    name = "{{$tool}}".removesuffix(".jar"),
    cmd = f"mv $SRC/{{$tool}} $OUT",
    srcs = [":download"],
    outs = ["{{$tool}}"],
    visibility = ["PUBLIC"],
    binary = True,
)
{{ end }}
