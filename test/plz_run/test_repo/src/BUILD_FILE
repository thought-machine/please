sh_binary(
    name = "env_printer",
    data = [
        "wibble.txt",
        ":wibble",
    ],
    main = "env_printer.sh",
)

sh_cmd(
    name = "wibble",
    cmd = "echo wibble",
)

sh_cmd(
    name = "wobble",
    cmd = "sleep 0.1 && echo wobble",
)

# Test add_data functionality
genrule(
    name = "_add_data_gen",
    deps = [":temp"],
    cmd = "echo testing > $OUT",
    outs = ["_add_data_gen.txt"],
    pre_build = lambda name: add_data(name, "data.txt"),
)

genrule(
    name = "temp",
    cmd = "touch $OUT",
    outs = ["foo.temp"],
)
