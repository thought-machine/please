sh_binary(
    name = "env_printer",
    data = [
        "wibble.txt",
        ":wibble",
    ],
    main = "env_printer.sh",
)

sh_cmd(
    name = "wibble",
    cmd = "echo wibble",
)

sh_cmd(
    name = "wobble",
    cmd = "sleep 0.1 && echo wobble",
)

# Test add_data functionality
build_rule(
    name = "_add_data_gen",
#    deps = [":temp"],
    test = True,
    test_cmd = "echo $DATA > $OUT",
    outs = ["_add_data_gen.txt"],
    pre_build = lambda name: add_data(name, ":temp"),
)

genrule(
    name = "temp",
    cmd = "touch $OUT",
    outs = ["foo.temp"],
)
